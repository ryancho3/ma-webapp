<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('section/head_common') %>
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Matchbook Foundation: Curriculum List</title>
  </head>

  <body>
    <%- include('section/header'); %>

    <div class="container">


      <div id="page">

        <div class="row">
          <h2>Appointments</h2>
        </div>

        <div class="row">
          <% if (typeof sessionModel != "undefined" && sessionModel.isLoggedIn() && sessionModel.isUserAdmin()) { %>
          <div class="card">
            <div class="card-body">As admin, you can see all active appointments</div>
          </div>
          <% } %>
        </div>

        <% appointmentModels.forEach(function(appointmentModel) { %>

          <ul>
            <li><a href="/appointment-view?appointment_id=<%= appointmentModel.getAppointmentId() %>"><%= appointmentModel.getAppointmentId() %></a></li>
            <li>Curriculum: <a href="/curriculum-view?curriculum_id=<%= appointmentModel.getCurriculumId() %>"><%= appointmentModel.getCurriculumName() %></a></li>
            <li>When: <%= appointmentModel.getAppointmentStartDateString() %> <%= appointmentModel.getAppointmentStartTimeString() %></li>
            <li>Tutor: <a href="/user?user_id=<%= appointmentModel.getTutorUserId() %>"><%= appointmentModel.getTutorUserName() %> (<%= appointmentModel.getTutorUserEmail() %>)</a></li>
            <li>Student: <a href="/user?user_id=<%= appointmentModel.getStudentUserId() %>"><%= appointmentModel.getStudentUserName() %> (<%= appointmentModel.getStudentUserEmail() %>)</a></li>
            <li>Note: <%= appointmentModel.getAdminNote() %></li>
            <li>
              Actions: 
              <form action="/appointment-archive" method="post">
                <input type="hidden" name="appointment_id" value="<%= appointmentModel.getAppointmentId() %>"/>
                <% if (sessionModel.isUserAdmin()) { %>
                  <input type="hidden" name="note" value="admin archive"/>
                  <input type="submit" value="Archive"/>
                <% } else if (sessionModel.isUserTutor()) { %>
                  <input type="hidden" name="note" value="tutor cancel"/>
                  <input type="submit" value="Cancel"/>
                <% } else if (sessionModel.isUserStudent()) { %>
                  <input type="hidden" name="note" value="student cancel"/>
                  <input type="submit" value="Cancel"/>
                <% } %>
              </form>
            </li>
          </ul>
        <% }) %>
      </div>
    </div>

    <%- include('section/footer'); %>

    <!-- Static -->
    <script type="text/javascript">
    $(document).ready(function() {

    })
    </script>
  </body>
</html>

